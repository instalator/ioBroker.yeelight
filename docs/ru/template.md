# Это документация
## Пример работы со сценами освещения для Yeelight LED Ceiling Light YLXD01YL<br/>
Сцены освещения задаются через flow_params<br/>

flow_params состоит из трех частей:<br/>
count<br/>
Общее количество изменений состояния лампы (итераций) до остановки сценария. Если count равно 0, то сценарий будет выполняться бесконечно.<br/>
action<br/>
Действие после завершения (остановки) сценария. 0 - лампа вернется в состояние, которое было перед запуском сценария. 1 - лампа останется в состоянии, на котором завершился сценарий. 2 - лампа выключится.<br/>
flow_expression<br/>
Непосредственно сама последовательность команд для изменения состояния лампы.<br/>
Пример flow_params:<br/>
4,2,1000,2,2700,100,500,1,255,10,5000,7,0,0,500,2,5000,1<br/>
flow_expression состоит из 4-х элементов: duration, mode, value, brightness (длительность, режим, величина, яркость). Цветовой сценарий - это и есть последовательность таких серий смены состояния лампы. Для примера выше получаем такую последовательность: изменить цветовую температуру на 2700К и поднять яркость на 100% в течение 1000 мс, затем изменить цвет на красный и уменьшить яркость до 10% в течение 500мс, затем оставаться в этом состоянии 5 секунд, затем изменить цветовую температуру на 5000К и уменьшить яркость до 1% в течение 500 мс. По окончанию 4-х итераций цветовой сценарий останавливается, а лампа выключается.<br/>

duration<br/>
Длительность постепенного изменения или паузы (сна) в миллисекундах. Минимальное значение 50 мс.
mode<br/>
Режим. 1 - цвет, 2 - цветовая температура, 7 - пауза (сон).
value<br/>
Величина. В режиме 1 - это RGB-цвет в десятичном формате, в режиме 2 - цветовая температура в Кельвинах, в режиме 7 значение игнорируется.
brightness<br/>
Яркость. Принимаемые значения от 1 до 100 и -1. В режиме 7 значение яркости игнорируется. Если значение равно -1, то яркость игнорируется и не изменяется (будут меняться только цвет или цветовая температура).<br/>

## Примеры цветовых сценариев:<br/>
Луна<br/>
0,0,50,2,3700,80<br/>
температура в кельвинах 3700 яркость 80<br/>
<br/>
Мигалка<br/>
8,0,1000,2,4000,50,1000,2,4000,1<br/>
<br/>
Рассвет<br/>
2,1,50,2,4000,1,900000,2,4000,100<br/>
<br/>
Закат<br/>
2,2,50,2,4000,75,900000,2,4000,1<br/>
<br/>
Диско<br/>
50,0,50,2,5000,100,50,2,5000,1<br/>
<br/>
Мерцание свечи<br/>
0,0,800,2,4000,50,800,2,4000,30,1200,2,4000,80,
800,2,4000,60,1200,2,4000,90,2400,2,4000,50,
1200,2,4000,80,800,2,4000,60,400,2,4000,70<br/>

(Picture)[img/picture.png)
